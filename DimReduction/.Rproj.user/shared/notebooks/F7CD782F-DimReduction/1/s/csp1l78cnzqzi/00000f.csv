"0","library(cowplot)"
"0","library(ggrepel)"
"0","library(RColorBrewer)"
"0",""
"0","col_vec_bcell <- c(""#c5e1a5"", ""#aed581"", ""#9ccc65"")  "
"0",""
"0","col_vec_cd4 <- c(""#b3d1ff"", ""#a3c1da"", ""#87bdd8"", ""#6fa3c1"", ""#00509e"") "
"0",""
"0","col_vec_cd8 <- c(""#ffcccb"", ""#ffb3ba"", ""#ff9999"", ""#ff8080"")  "
"0",""
"0","col_vec_mait <- c(""#dab3ff"", ""#c299ff"") "
"0",""
"0","col_vec_nk <- c(""#ffe4b3"", ""#ffd699"", ""#ffc266"") "
"0",""
"0","col_vec_tcrgd <- c(""#d3d3d3"", ""#696969"")  "
"0",""
"0",""
"0",""
"0","display_tbl <- cell_count %>% "
"0","  mutate(n_all = n()) %>% "
"0","  group_by(major) %>% "
"0","  mutate(n_major = n()) %>% "
"0","  ungroup() %>% "
"0","  select(major_minor, major, minor, n_all, n_major) %>% "
"0","  group_by(major_minor, major, minor) %>% "
"0","  summarise("
"0","    perc_all = (n()/n_all[1]*100) %>% signif(2),"
"0","    perc_major = (n()/n_major[1]*100) %>%  signif(2),"
"0","    .groups = ""drop"""
"0","  ) %>% "
"0","  ungroup() %>% "
"0","  mutate("
"0","    col_minor = c(col_vec_bcell, col_vec_cd4, col_vec_cd8, col_vec_mait, col_vec_nk, col_vec_tcrgd),"
"0","    col_major = c("
"0","      rep(col_vec_bcell[2],3),"
"0","      rep(col_vec_cd4[3],5),"
"0","      rep(col_vec_cd8[2],4),"
"0","      rep(col_vec_mait[2],2),"
"0","      rep(col_vec_nk[2],3),"
"0","      rep(col_vec_tcrgd[2],2)"
"0","    )"
"0","  ) %>% "
"0","  "
"0","  mutate("
"0","    shape_minor = c(15:17, c(15:18,25), c(15:18), c(15:16), c(15:17), c(15:16)),"
"0","    shape_major = c("
"0","      rep(15,3),"
"0","      rep(16,5),"
"0","      rep(17,4),"
"0","      rep(18,2),"
"0","      rep(25,3),"
"0","      rep(10,2)"
"0","      "
"0","    )"
"0","  ) %>% "
"0","  select(major_minor, major, minor, col_major, col_minor, shape_major, shape_minor, perc_all, perc_major)"
"0",""
"0","col_lab_minor <- display_tbl$col_major %>% "
"0","  stats::setNames(display_tbl$major_minor)"
"0","shape_lab_minor <- display_tbl$shape_minor %>% "
"0","  stats::setNames(display_tbl$major_minor)"
"0",""
"0","display_tbl_major <- display_tbl %>% "
"0","  group_by(major) %>% "
"0","  slice(1) %>% "
"0","  ungroup()"
"0",""
"0","col_lab_major <- display_tbl_major$col_major %>% "
"0","  stats::setNames(display_tbl_major$major)"
"0","shape_lab_major <- display_tbl_major$shape_major %>% "
"0","  stats::setNames(display_tbl_major$major)"
